(this["webpackJsonpclient-portal-app"]=this["webpackJsonpclient-portal-app"]||[]).push([[18],{469:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(99),l=a(244),c=a(906);t.a=function(e){var t=e.menu,a=void 0===t?r.a.createElement(s.a,null):t,n=e.placement,i=void 0===n?"bottomRight":n;return r.a.createElement(l.a,{overlay:a,placement:i,trigger:["click"]},r.a.createElement("div",{className:"ellipsis-dropdown"},r.a.createElement(c.a,null)))}},517:function(e,t,a){"use strict";var n=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},s=a(10),l=function(e,t){return n.createElement(s.a,Object.assign({},e,{ref:t,icon:r}))};l.displayName="MailOutlined";t.a=n.forwardRef(l)},775:function(e,t,a){},900:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a.n(n),s=a(11),l=a(61),c=a(90),i=a(80),o=a(79),u=a(0),m=a.n(u),d=a(264),f=a(99),E=a(422),p=a(564),v=a(375),b=a(67),h=a(512),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},w=a(10),y=function(e,t){return u.createElement(w.a,Object.assign({},e,{ref:t,icon:g}))};y.displayName="ArrowRightOutlined";var N=u.forwardRef(y),I=a(905),x=a(908),O=a(565),U=a(907),k=a(387),C=a(398),S=a(909),j=a(174),D=a.n(j),P=a(380),M=a(377),R=a(466),V=a(386),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},F=function(e,t){return u.createElement(w.a,Object.assign({},e,{ref:t,icon:L}))};F.displayName="MobileOutlined";var A,T,z=u.forwardRef(F),K=a(517),q=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.visible,n=e.close;return m.a.createElement(P.a,{width:300,placement:"right",onClose:n,closable:!1,visible:a},m.a.createElement("div",{className:"text-center mt-3"},m.a.createElement(M.a,{size:80,src:null===t||void 0===t?void 0:t.Photo,icon:m.a.createElement(k.a,null)}),m.a.createElement("h3",{className:"mt-2 mb-0"},(null===t||void 0===t?void 0:t.FirstName)&&(null===t||void 0===t?void 0:t.LastName)?(null===t||void 0===t?void 0:t.FirstName)+" "+(null===t||void 0===t?void 0:t.LastName):" "),m.a.createElement("span",{className:"text-muted"},"User")),m.a.createElement(R.a,{dashed:!0}),m.a.createElement("div",{className:""},m.a.createElement("h6",{className:"text-muted text-uppercase mb-3"},"Account details"),m.a.createElement("p",null,m.a.createElement(k.a,null),m.a.createElement("span",{className:"ml-3 text-dark"},"Personal ID: ",null===t||void 0===t?void 0:t.ID)),m.a.createElement("p",null,m.a.createElement(V.a,null),m.a.createElement("span",{className:"ml-3 text-dark"},"Company ID: ",null===t||void 0===t?void 0:t.CompanyID))),m.a.createElement("div",{className:"mt-5"},m.a.createElement("h6",{className:"text-muted text-uppercase mb-3"},"CONTACT"),m.a.createElement("p",null,m.a.createElement(z,null),m.a.createElement("span",{className:"ml-3 text-dark"},null===t||void 0===t?void 0:t.PhoneNumber)),m.a.createElement("p",null,m.a.createElement(K.a,null),m.a.createElement("span",{className:"ml-3 text-dark"},(null===t||void 0===t?void 0:t.Email)?null===t||void 0===t?void 0:t.Email:"-"))))}}]),a}(u.Component),H=function(e){var t,a=e.name,n=e.suffix,r=e.subTitle,s=e.id,l=e.type,c=e.src,i=e.icon,o=e.size,u=e.shape,d=e.gap,f=e.text,E=e.onNameClick;return m.a.createElement("div",{className:"avatar-status d-flex align-items-center"},(t={icon:i,src:c,type:l,size:o,shape:u,gap:d,text:f},m.a.createElement(M.a,Object.assign({},t,{className:"ant-avatar-".concat(t.type)}),t.text)),m.a.createElement("div",{className:"ml-2"},m.a.createElement("div",null,E?m.a.createElement("div",{onClick:function(){return E({name:a,subTitle:r,src:c,id:s})},className:"avatar-status-name clickable"},a):m.a.createElement("div",{className:"avatar-status-name"},a),m.a.createElement("span",null,n)),m.a.createElement("div",{className:"text-muted avatar-status-subtitle"},r)))},Y=a(29),B=a(7),J=a(87),G=a(562),W=a(74),_=a(412),Q=a(413),X=a(18),Z=a(23),$=a(78),ee=a(107),te=a(66),ae=function(e){var t=e.data,a=e.visible,n=e.onCancel,l=e.getUsersInfo,c=G.a.useForm(),i=Object(J.a)(c,1)[0];Object(u.useEffect)((function(){a&&i.resetFields()}),[a,i]);var o=function(e){return(new $.a).UpdateUser(e)};return m.a.createElement(d.a,{destroyOnClose:!0,title:"Edit user",visible:a,okText:m.a.createElement(X.a,{id:"account.EditProfile.SaveChange"}),onCancel:n,onOk:function(){i.validateFields().then((function(e){n(),function(e){W.b.loading({content:Object(te.a)(ee.f),key:"updatable"}),setTimeout(Object(s.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o({User:Object(B.a)(Object(B.a)({},t),e)}).then((function(e){e&&0===e.ErrorCode&&(W.b.success({content:Object(te.a)(ee.b),key:"updatable"}),l())}));case 1:case"end":return a.stop()}}),a)}))),1e3)}(e)}))}},m.a.createElement(G.a,{form:i,name:"basicInformation",layout:"vertical",initialValues:t},m.a.createElement(_.a,{gutter:Z.c},m.a.createElement(Q.a,{xs:24,sm:24,md:12},m.a.createElement(G.a.Item,{label:m.a.createElement(X.a,{id:"account.EditProfile.FirstName"}),name:"FirstName",rules:[{required:!0,message:"Please input your first name!"}]},m.a.createElement(v.a,null))),m.a.createElement(Q.a,{xs:24,sm:24,md:12},m.a.createElement(G.a.Item,{label:m.a.createElement(X.a,{id:"account.EditProfile.LastName"}),name:"LastName",rules:[{required:!0,message:"Please input your last name!"}]},m.a.createElement(v.a,null))),m.a.createElement(Q.a,{xs:24,sm:24,md:12},m.a.createElement(G.a.Item,{label:m.a.createElement(X.a,{id:"account.EditProfile.Email"}),name:"Email",rules:[{required:!0,type:"email",message:"Please enter a valid email!"}]},m.a.createElement(v.a,null))),m.a.createElement(Q.a,{xs:24,sm:24,md:12},m.a.createElement(G.a.Item,{label:m.a.createElement(X.a,{id:"account.EditProfile.PhoneNumber"}),name:"PhoneNumber"},m.a.createElement(v.a,null))))))},ne=function(e){var t=e.onCancel,a=e.visible,n=e.CompanyID,r=e.getUsersInfo,s=G.a.useForm(),l=Object(J.a)(s,1)[0],c=Object(u.useState)(!1),i=Object(J.a)(c,2),o=i[0],f=i[1],E=function(e){(function(e){return(new $.b).RegisterUser(Object(B.a)(Object(B.a)({},e),{},{CompanyID:n,UiLanguage:0}))})(e).then((function(e){e&&0===e.ErrorCode&&r()}))};return m.a.createElement(d.a,{title:"Invite user",visible:a,okText:m.a.createElement(X.a,{id:"account.EditProfile.SaveChange"}),onCancel:t,confirmLoading:o,onOk:function(){f(!0),setTimeout((function(){f(!1),l.validateFields().then((function(e){t(),E(e)}))}),1e3)}},m.a.createElement(G.a,{form:l,name:"basicInformation",layout:"vertical"},m.a.createElement(_.a,{gutter:Z.c},m.a.createElement(Q.a,{xs:24,sm:24,md:12},m.a.createElement(G.a.Item,{label:m.a.createElement(X.a,{id:"account.EditProfile.FirstName"}),name:"FirstName",rules:[{required:!0,message:"Please input your first name!"}]},m.a.createElement(v.a,null))),m.a.createElement(Q.a,{xs:24,sm:24,md:12},m.a.createElement(G.a.Item,{label:m.a.createElement(X.a,{id:"account.EditProfile.LastName"}),name:"LastName",rules:[{required:!0,message:"Please input your last name!"}]},m.a.createElement(v.a,null))),m.a.createElement(Q.a,{xs:24,sm:24,md:24},m.a.createElement(G.a.Item,{label:m.a.createElement(X.a,{id:"account.EditProfile.Email"}),name:"Email",rules:[{required:!0,type:"email",message:"Please enter a valid email!"}]},m.a.createElement(v.a,null))))))},re=a(57),se=a(156),le=a(469),ce=a(91);a(775);a.d(t,"status",(function(){return A})),a.d(t,"UserList",(function(){return ie})),(T=A||(A={}))[T.inactive=0]="inactive",T[T.active=1]="active",T[T.disabled=2]="disabled";var ie=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={users:[],usersToSearch:[],selectedRows:[],selectedKeys:[],userProfileVisible:!1,selectedUser:null,isHidden:"block",editModalVisible:!1,newUserModalVisible:!1,registerUserModalVisible:!1,loading:!0},e.instance=new $.a,e.getUsersInfo=Object(s.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.instance.GetUserList().then((function(t){if(t&&0===t.ErrorCode){e.setState({loading:!1});var a=t.Users.filter((function(t){return t.ID!==e.props.ID})),n=re.a.sortData(a,"ID").reverse();e.setState({users:n,usersToSearch:n})}})));case 1:case"end":return t.stop()}}),t)}))),e.showUserProfile=function(t){e.setState({userProfileVisible:!0,selectedUser:t})},e.closeUserViewProfile=function(){e.setState({userProfileVisible:!1,selectedUser:null})},e.showEditModal=function(t){e.setState({editModalVisible:!0,selectedUser:t})},e.closeEditModal=function(){e.setState({editModalVisible:!1,selectedUser:null})},e.showNewUserModal=function(){e.setState({newUserModalVisible:!0})},e.closeNewUserModal=function(){e.setState({newUserModalVisible:!1})},e.toggleStatusRow=function(){var t=Object(s.a)(r.a.mark((function t(a,n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d.a.confirm({title:"Are you sure you want to ".concat(0===n||2===n?"disable":"activate"," ").concat(a.length," ").concat(a.length>1?"users":"user","?"),onOk:function(){var t=Object(s.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(a.map(function(){var t=Object(s.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handleUserStatus(a.ID,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:e.setState({selectedRows:[],selectedKeys:[]}),e.getUsersInfo();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.handleUserStatus=function(t,a){return e.instance.ChangeUserStatus(t,a)},e.dropdownMenu=function(t){return m.a.createElement(f.a,null,0===t.Status&&m.a.createElement(f.a.Item,{onClick:function(){return d.a.confirm({title:"Are you sure you want to send an email to ".concat(t.FirstName," ?"),onOk:function(){e.props.sendActivationCode(t.ID)},onCancel:function(){}})}},m.a.createElement(se.a,{alignItems:"center"},m.a.createElement(N,null),m.a.createElement("span",{className:"ml-2"},m.a.createElement(X.a,{id:"users.SendCode"})))),m.a.createElement(f.a.Item,{onClick:function(){return e.showUserProfile(t)}},m.a.createElement(se.a,{alignItems:"center"},m.a.createElement(I.a,null),m.a.createElement("span",{className:"ml-2"},m.a.createElement(X.a,{id:"users.ViewDetails"})))),m.a.createElement(f.a.Item,{onClick:function(){return e.showEditModal(t)}},m.a.createElement(se.a,{alignItems:"center"},m.a.createElement(x.a,null),m.a.createElement("span",{className:"ml-2"},m.a.createElement(X.a,{id:"users.Edit"})))),t.Status===A.disabled?m.a.createElement(f.a.Item,{onClick:Object(s.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:d.a.confirm({title:"Are you sure you want to activate this user?",onOk:function(){var a=Object(s.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.handleUserStatus(t.ID,A.active);case 2:return a.next=4,e.getUsersInfo();case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()});case 1:case"end":return a.stop()}}),a)})))},m.a.createElement(se.a,{alignItems:"center"},m.a.createElement(O.a,null),m.a.createElement("span",{className:"ml-2"},m.a.createElement(X.a,{id:"users.Activate"})))):t.Status===A.active?m.a.createElement(f.a.Item,{onClick:Object(s.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:d.a.confirm({title:Object(te.a)("users.Disable.Title"),onOk:function(){var a=Object(s.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.handleUserStatus(t.ID,A.disabled);case 2:return a.next=4,e.getUsersInfo();case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()});case 1:case"end":return a.stop()}}),a)})))},m.a.createElement(se.a,{alignItems:"center"},m.a.createElement(U.a,null),m.a.createElement("span",{className:"ml-2"},m.a.createElement(X.a,{id:"users.Disable"})))):null)},e.onSearch=function(t){var a=t.currentTarget.value,n=a?e.state.users:e.state.usersToSearch,r=re.a.wildCardSearch(n,a);e.setState({users:r})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getUsersInfo()}},{key:"componentWillUnmount",value:function(){this.instance._source.cancel()}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.userProfileVisible,r=t.selectedUser,s=[{title:m.a.createElement(X.a,{id:"users.table.User"}),dataIndex:"name",render:function(e,t){return m.a.createElement("div",{className:"d-flex"},m.a.createElement(H,{src:t.Photo,name:"".concat(t.FirstName," ").concat(t.LastName),subTitle:t.Email,icon:m.a.createElement(k.a,null)}))}},{title:m.a.createElement(X.a,{id:"users.table.Role"}),render:function(){return"User"}},{title:m.a.createElement(X.a,{id:"users.table.LastOnline"}),dataIndex:"LastAuthorize",render:function(e){return m.a.createElement("span",null,e?D.a.unix(e.slice(6,16)).format("DD/MM/YYYY"):" "," ")}},{title:m.a.createElement(X.a,{id:"users.table.Status"}),dataIndex:"Status",render:function(e){return m.a.createElement(E.a,{className:"text-capitalize",color:e===A.active?"cyan":e===A.disabled?"red":"orange"},1===e?m.a.createElement(X.a,{id:"users.status.Active"}):2===e?m.a.createElement(X.a,{id:"users.status.Disabled"}):m.a.createElement(X.a,{id:"users.status.NotActivated"}))}},{dataIndex:"actions",render:function(t,a){return m.a.createElement("div",{className:"text-right"},m.a.createElement(le.a,{menu:e.dropdownMenu(a)}))}}];return m.a.createElement(p.a,null,m.a.createElement(se.a,{className:"mb-1",mobileFlex:!1,justifyContent:"between"},m.a.createElement("div",{className:"mr-md-3 mb-3"},m.a.createElement(v.a,{placeholder:Object(te.a)("app.Search"),prefix:m.a.createElement(C.a,null),onChange:function(t){return e.onSearch(t)}})),m.a.createElement("div",null,m.a.createElement(se.a,null,this.state.selectedRows.length>0&&m.a.createElement(m.a.Fragment,null,m.a.createElement(b.a,{type:"primary",className:"mr-3",onClick:function(){return e.toggleStatusRow(e.state.selectedRows,A.active)}},this.state.selectedRows.length>1?m.a.createElement(m.a.Fragment,null,m.a.createElement(X.a,{id:"users.Activate"})," (",this.state.selectedRows.length,")"):m.a.createElement(X.a,{id:"users.Activate"})),m.a.createElement(b.a,{type:"ghost",className:"mr-3",onClick:function(){return e.toggleStatusRow(e.state.selectedRows,A.disabled)}},this.state.selectedRows.length>1?m.a.createElement(m.a.Fragment,null,m.a.createElement(X.a,{id:"users.Disable"})," (",this.state.selectedRows.length,")"):m.a.createElement(X.a,{id:"users.Disable"}))),m.a.createElement(b.a,{onClick:this.showNewUserModal,type:"primary",icon:m.a.createElement(S.a,null),block:!0}," ",m.a.createElement(X.a,{id:"users.Invite"}))))),m.a.createElement(h.a,{loading:this.state.loading,columns:s,dataSource:a,rowKey:"ID",rowSelection:{onChange:function(t,a){e.setState({selectedKeys:t}),e.setState({selectedRows:a})},selectedRowKeys:this.state.selectedKeys,type:"checkbox",preserveSelectedRowKeys:!1}}),m.a.createElement(q,{data:r,visible:n,close:function(){e.closeUserViewProfile()}}),m.a.createElement(ne,{getUsersInfo:this.getUsersInfo,CompanyID:this.props.CompanyID,onCancel:this.closeNewUserModal,visible:this.state.newUserModalVisible}),m.a.createElement(ae,{getUsersInfo:this.getUsersInfo,data:r,visible:this.state.editModalVisible,onCancel:function(){e.closeEditModal()}}))}}]),a}(u.Component);t.default=Object(Y.b)((function(e){var t=e.auth,a=e.theme,n=e.account,r=t.token,s=n,l=s.CompanyID,c=s.ID;return{token:r,locale:a.locale,CompanyID:l,ID:c}}),{sendActivationCode:ce.e})(ie)}}]);
//# sourceMappingURL=18.c4633a42.chunk.js.map